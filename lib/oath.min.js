/*Copyright hinell@github.com 2015. | https://github.com/hinell/oath-js | 15.11.23*/
void function(){"use strict";function a(){this._fail={handler:void 0},this._okay={handlers:[]},this._okay.call=function(a){1==this.handlers.length?a=[this.handlers[0].apply({},a)]:this.handlers.forEach(function(b){a=[b.apply({},a)]})},this.resolved=!1,this.rejected=!1,this.done=!1,this.target={},this.target["return"]=void 0,this.resolve=function(){this.resolved||this.rejected||(this.resolved=!0,this.value=[].slice.call(arguments),this._okay.call(this.target["return"]=this.value),this.done=!0)},this.reject=function(){this.resolved||this.rejected||(this.rejected=!0,this.value=[].slice.call(arguments),this.target["return"]=[this._fail.handler.apply({},this.value)],this._okay.call(this.target["return"]),this.done=!0)},this.then=function(a){return this._fail.handler&&(this._okay.handlers=[]),this._okay.handlers.push(a),this},this["catch"]=function(a){return this._fail.handler=a,this},this.target.obj=arguments[0],this.target.delay=5,this.target.asynchronize=function(){var a=this.obj,b="function"==typeof a;b||(this.obj=function(b,c){setTimeout(b.bind(this,a),this.delay)}.bind(this))},this.target.init=function(){this.target.obj||new e("Initialization of Promise reqires the target function or object to be set!"),this.target.obj(this.resolve.bind(this),this.reject.bind(this))}.bind(this),this.target.obj&&setTimeout(function(){this.target.asynchronize(),this.target.init()}.bind(this))}function b(){this.promises=[],this.done=function(){return this.promises.reduce(function(a,b){return a?b.resolved||b.rejected:a},!0)},this.results=function(){return this.promises.reduce(function(a,b){return a=a.concat(b.value)},[])},this.listener=void 0,this.coefficient=2,this.insert=function(a){this.listener||new e("Expected a promise's listener to be defined!: reconciler.listener")["throw"](),this.promises=a,this.promises.length<2&&new e("Expected at least two Promises are required!: new Reconciler([promise x 2])")["throw"](),this.promises.forEach(function(a){a.then(this.listener)["catch"](this.listener),a.target.delay=~~(++this.coefficient/Math.E*10),"undefined"==typeof a.target.obj&&new e("Each promise has to have a target object!: promise.target.obj")["throw"]()},this)},this.reconcile=function(){this.promises.length<2&&new e("Expected an .insert() method call before reconcilation!")["throw"](),this.promises.forEach(function(a){a.target.asynchronize(),a.target.init()})}}function c(c){c.length<2&&new e("Expected at least two async or sync objects!")["throw"](),a.call(this),this["catch"]=function(){new e("cathc() method is not allowed to catch results of many async|sync rejections, please, use then()")["throw"]()},this.promises=new b,this.promises.listener=function(){this.promises.done()&&this.resolve.apply(this,this.promises.results())}.bind(this),this.promises.insert(c.map(function(b){var c=new a;return c.target.obj=b,c},this)),setTimeout(this.promises.reconcile.bind(this.promises))}function d(){return arguments.length<=1?new a(arguments[0]):new c([].slice.call(arguments))}var e=function(a){var b=new Error(a);return b["throw"]=function(){throw this},b};"object"==typeof module?module.exports=d:"function"==typeof define?define(function(a,b,c){return d}):window.Oath=d}();
//# sourceMappingURL=oath.min.map